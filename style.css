@import url("https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Pacifico&family=Lobster&display=swap");

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  overflow: hidden;
  background: linear-gradient(
    to bottom,
    #0a0e27 0%,
    #1a1a3a 30%,
    #2a2a4a 60%,
    #1a2a1a 100%
  );
  font-family: "Dancing Script", cursive;
  cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="10" fill="%23e6e6fa" opacity="0.8"/></svg>')
      16 16,
    auto;
  position: relative;
  z-index: 0;
}

/* Village Background */
.village-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  z-index: -1;
  pointer-events: none;
  background: 
    /* Mountains in the far distance */ linear-gradient(
      to right,
      transparent 0%,
      rgba(20, 30, 60, 0.8) 20%,
      rgba(30, 40, 70, 0.8) 50%,
      rgba(20, 30, 60, 0.8) 80%,
      transparent 100%
    ),
    /* Village silhouette */
      url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 400" preserveAspectRatio="none"><defs><linearGradient id="houseGrad" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:%23000;stop-opacity:0.9" /><stop offset="100%" style="stop-color:%23111;stop-opacity:1" /></linearGradient></defs><!-- Mountains --><path d="M0,200 Q200,150 400,180 T800,160 T1200,170 L1200,400 L0,400 Z" fill="%23141e3c" opacity="0.7"/><!-- Hills --><path d="M0,250 Q150,220 300,240 T600,230 T900,245 T1200,235 L1200,400 L0,400 Z" fill="%231a2847" opacity="0.8"/><!-- Village houses --><g fill="url(%23houseGrad)"><!-- House 1 --><rect x="100" y="280" width="60" height="50" /><polygon points="100,280 130,250 160,280" /><!-- House 2 --><rect x="180" y="290" width="50" height="40" /><polygon points="180,290 205,265 230,290" /><!-- House 3 --><rect x="250" y="275" width="70" height="55" /><polygon points="250,275 285,245 320,275" /><!-- House 4 --><rect x="400" y="285" width="55" height="45" /><polygon points="400,285 427.5,260 455,285" /><!-- House 5 --><rect x="480" y="290" width="65" height="40" /><polygon points="480,290 512.5,265 545,290" /><!-- House 6 --><rect x="600" y="280" width="60" height="50" /><polygon points="600,280 630,255 660,280" /><!-- House 7 --><rect x="720" y="285" width="50" height="45" /><polygon points="720,285 745,265 770,285" /><!-- House 8 --><rect x="850" y="275" width="65" height="55" /><polygon points="850,275 882.5,250 915,275" /><!-- House 9 --><rect x="980" y="290" width="55" height="40" /><polygon points="980,290 1007.5,270 1035,290" /><!-- House 10 --><rect x="1080" y="280" width="60" height="50" /><polygon points="1080,280 1110,255 1140,280" /></g><!-- Trees --><g fill="%230a1a0a" opacity="0.9"><!-- Coconut palms --><ellipse cx="80" cy="280" rx="8" ry="50" /><ellipse cx="75" cy="240" rx="25" ry="15" /><ellipse cx="85" cy="240" rx="25" ry="15" /><ellipse cx="350" cy="275" rx="10" ry="55" /><ellipse cx="345" cy="230" rx="30" ry="18" /><ellipse cx="355" cy="230" rx="30" ry="18" /><ellipse cx="580" cy="285" rx="9" ry="45" /><ellipse cx="575" cy="250" rx="28" ry="16" /><ellipse cx="585" cy="250" rx="28" ry="16" /><ellipse cx="800" cy="280" rx="8" ry="50" /><ellipse cx="795" cy="240" rx="25" ry="15" /><ellipse cx="805" cy="240" rx="25" ry="15" /><!-- Regular trees --><ellipse cx="50" cy="290" rx="15" ry="40" /><ellipse cx="45" cy="260" rx="20" ry="20" /><ellipse cx="55" cy="260" rx="20" ry="20" /><ellipse cx="380" cy="285" rx="12" ry="45" /><ellipse cx="375" cy="250" rx="18" ry="18" /><ellipse cx="385" cy="250" rx="18" ry="18" /><ellipse cx="680" cy="290" rx="14" ry="40" /><ellipse cx="675" cy="260" rx="22" ry="22" /><ellipse cx="685" cy="260" rx="22" ry="22" /><ellipse cx="950" cy="285" rx="11" ry="45" /><ellipse cx="945" cy="250" rx="16" ry="16" /><ellipse cx="955" cy="250" rx="16" ry="16" /></g><!-- House windows with warm light --><g fill="%23ffeb3b" opacity="0.8"><!-- House 1 windows --><rect x="110" y="295" width="8" height="10" /><rect x="125" y="295" width="8" height="10" /><rect x="140" y="295" width="8" height="10" /><!-- House 2 windows --><rect x="190" y="305" width="6" height="8" /><rect x="205" y="305" width="6" height="8" /><!-- House 3 windows --><rect x="260" y="290" width="8" height="12" /><rect x="275" y="290" width="8" height="12" /><rect x="290" y="290" width="8" height="12" /><rect x="305" y="290" width="8" height="12" /><!-- House 4 windows --><rect x="410" y="300" width="7" height="9" /><rect x="425" y="300" width="7" height="9" /><rect x="440" y="300" width="7" height="9" /><!-- House 5 windows --><rect x="490" y="305" width="8" height="8" /><rect x="505" y="305" width="8" height="8" /><rect x="520" y="305" width="8" height="8" /><!-- House 6 windows --><rect x="610" y="295" width="8" height="10" /><rect x="625" y="295" width="8" height="10" /><rect x="640" y="295" width="8" height="10" /><!-- House 7 windows --><rect x="730" y="300" width="6" height="9" /><rect x="745" y="300" width="6" height="9" /><!-- House 8 windows --><rect x="860" y="290" width="8" height="12" /><rect x="875" y="290" width="8" height="12" /><rect x="890" y="290" width="8" height="12" /><rect x="900" y="290" width="8" height="12" /><!-- House 9 windows --><rect x="990" y="305" width="7" height="8" /><rect x="1005" y="305" width="7" height="8" /><rect x="1020" y="305" width="7" height="8" /><!-- House 10 windows --><rect x="1090" y="295" width="8" height="10" /><rect x="1105" y="295" width="8" height="10" /><rect x="1125" y="295" width="8" height="10" /></g></svg>')
      no-repeat bottom center / cover;
}

/* Enhanced Moon */
body::after {
  content: "";
  position: fixed;
  top: 5%;
  right: 10%;
  width: 200px;
  height: 200px;
  background: radial-gradient(
    circle,
    rgba(255, 249, 230, 1) 0%,
    rgba(255, 240, 200, 0.95) 30%,
    rgba(255, 230, 179, 0.8) 50%,
    rgba(230, 230, 250, 0.4) 70%,
    transparent 100%
  );
  border-radius: 50%;
  z-index: 2;
  pointer-events: none;
  box-shadow: 0 0 50px 20px rgba(255, 249, 230, 0.6),
    0 0 100px 40px rgba(255, 240, 200, 0.4),
    0 0 150px 60px rgba(230, 230, 250, 0.2);
  animation: moonGlow 4s ease-in-out infinite;
}

/* Moon surface details */
body::before {
  content: "";
  position: fixed;
  top: 7%;
  right: 12%;
  width: 160px;
  height: 160px;
  background: radial-gradient(
      circle at 30% 40%,
      rgba(200, 200, 200, 0.3) 8px,
      transparent 8px
    ),
    radial-gradient(
      circle at 70% 30%,
      rgba(180, 180, 180, 0.2) 5px,
      transparent 5px
    ),
    radial-gradient(
      circle at 50% 70%,
      rgba(190, 190, 190, 0.25) 6px,
      transparent 6px
    ),
    radial-gradient(
      circle at 80% 60%,
      rgba(170, 170, 170, 0.2) 4px,
      transparent 4px
    );
  border-radius: 50%;
  z-index: 3;
  pointer-events: none;
  animation: moonGlow 4s ease-in-out infinite;
}

@keyframes moonGlow {
  0%,
  100% {
    opacity: 0.9;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.05);
  }
}

#canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  z-index: 1;
  background: transparent;
}

.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  pointer-events: none;
  z-index: 10;
}

.dedication {
  position: absolute;
  top: 8%;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  z-index: 15;
  opacity: 0;
  animation: fadeInDedication 2s ease-out 1s forwards;
}

.dedication h2 {
  font-family: "Lobster", cursive;
  font-size: 2.5em;
  background: linear-gradient(135deg, #ff6b6b, #e6e6fa, #ff69b4);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  animation: shimmerDedication 3s ease-in-out infinite;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
}

.dedication .recipient {
  font-family: "Pacifico", cursive;
  font-size: 3.2em;
  color: #e6e6fa;
  text-shadow: 0 0 20px rgba(230, 230, 250, 0.9), 2px 2px 5px rgba(0, 0, 0, 0.6);
  animation: pulseGlow 2.5s ease-in-out infinite;
  position: relative;
}

.dedication .recipient::before,
.dedication .recipient::after {
  content: "✨";
  position: absolute;
  font-size: 0.6em;
  color: #ff69b4;
  animation: sparkleFloat 1.8s ease-in-out infinite;
}

.dedication .recipient::before {
  left: -35px;
  top: 50%;
  transform: translateY(-50%);
}

.dedication .recipient::after {
  right: -35px;
  top: 50%;
  transform: translateY(-50%);
  animation-delay: 0.9s;
}

@keyframes fadeInDedication {
  to {
    opacity: 1;
  }
}

@keyframes shimmerDedication {
  0%,
  100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

@keyframes pulseGlow {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

@keyframes sparkleFloat {
  0%,
  100% {
    opacity: 0.4;
    transform: translateY(-50%) scale(0.9);
  }
  50% {
    opacity: 1;
    transform: translateY(-60%) scale(1.1);
  }
}

.greeting {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  color: #e6e6fa;
  opacity: 0;
  animation: fadeIn 2s ease-out 3s forwards;
  background: rgba(0, 0, 0, 0.6);
  padding: 30px;
  border-radius: 20px;
  backdrop-filter: blur(15px);
  border: 2px solid rgba(230, 230, 250, 0.3);
  box-shadow: 0 0 40px rgba(230, 230, 250, 0.2);
}

.greeting h1 {
  font-size: 4em;
  background: linear-gradient(45deg, #e6e6fa, #b0c4de, #ff69b4);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  animation: shimmer 3s linear infinite;
}

.greeting p {
  font-size: 1.8em;
  color: #b0c4de;
  opacity: 0;
  animation: slideUp 1s ease-out forwards;
  line-height: 1.4;
}

.greeting p:nth-child(2) {
  animation-delay: 4s;
}
.greeting p:nth-child(3) {
  animation-delay: 4.5s;
}
.greeting p:nth-child(4) {
  animation-delay: 5s;
}
.greeting p:nth-child(5) {
  animation-delay: 5.5s;
  font-size: 1.6em;
  color: #ff69b4;
  font-style: italic;
}

.greeting .wishes {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid rgba(230, 230, 250, 0.3);
}

@keyframes fadeIn {
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes shimmer {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 200% 50%;
  }
}

.lantern {
  position: absolute;
  width: 60px;
  height: 80px;
  animation: float 10s infinite ease-in-out;
  cursor: pointer;
  transition: transform 0.3s, filter 0.3s;
  z-index: 25;
}

.lantern:hover {
  transform: scale(1.2);
  filter: brightness(1.5) drop-shadow(0 0 15px rgba(255, 107, 107, 0.7));
}

.lantern-body {
  width: 100%;
  height: 70%;
  background: radial-gradient(ellipse at center, #ff6b6b 0%, #c92a2a 70%);
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  box-shadow: 0 0 40px rgba(255, 107, 107, 0.8);
  animation: lanternGlow 2.5s ease-in-out infinite alternate;
  border: 1px solid rgba(230, 230, 250, 0.5);
}

.lantern-body::before {
  content: "";
  position: absolute;
  top: -6px;
  left: 50%;
  transform: translateX(-50%);
  width: 16px;
  height: 12px;
  background: #e6e6fa;
  border-radius: 50%;
}

.lantern-body::after {
  content: "福";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  color: #e6e6fa;
  text-shadow: 0 0 10px rgba(230, 230, 250, 0.8);
}

.lantern-tassel {
  position: absolute;
  bottom: -12px;
  left: 50%;
  transform: translateX(-50%);
  width: 2px;
  height: 15px;
  background: #e6e6fa;
  animation: tassel 1.8s ease-in-out infinite;
}

.lantern-tassel::after {
  content: "";
  position: absolute;
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
  width: 10px;
  height: 6px;
  background: #ff6b6b;
  border-radius: 0 0 50% 50%;
}

@keyframes lanternGlow {
  from {
    box-shadow: 0 0 40px rgba(255, 107, 107, 0.8);
  }
  to {
    box-shadow: 0 0 60px rgba(255, 107, 107, 1),
      0 0 80px rgba(230, 230, 250, 0.5);
  }
}

@keyframes tassel {
  0%,
  100% {
    transform: translateX(-50%) rotate(-4deg);
  }
  50% {
    transform: translateX(-50%) rotate(4deg);
  }
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0) rotate(1deg);
  }
  50% {
    transform: translateY(-20px) rotate(-1deg);
  }
}

.controls {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 15px;
  z-index: 100;
  flex-wrap: wrap;
  justify-content: center;
  max-width: 95%;
}

button {
  padding: 15px 30px;
  font-size: 1.2em;
  font-family: "Dancing Script", cursive;
  background: linear-gradient(135deg, #667eea, #ff6b6b);
  color: #e6e6fa;
  border: none;
  border-radius: 25px;
  cursor: pointer;
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
  pointer-events: auto;
}

button:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 30px rgba(102, 126, 234, 0.6);
  filter: brightness(1.2);
}

button:active {
  transform: scale(0.98);
}

.particles {
  position: fixed;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 5;
}

.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: #e6e6fa;
  border-radius: 50%;
  animation: particleFloat 10s infinite linear;
  box-shadow: 0 0 8px rgba(230, 230, 250, 0.7);
}

@keyframes particleFloat {
  from {
    transform: translateY(100vh);
    opacity: 1;
  }
  to {
    transform: translateY(-50px);
    opacity: 0;
  }
}

.moon-cake {
  position: absolute;
  width: 80px;
  height: 80px;
  animation: bounce 15s infinite ease-in-out;
  cursor: pointer;
  transition: transform 0.3s;
  z-index: 20;
}

.moon-cake:hover {
  transform: scale(1.2);
  filter: brightness(1.3);
}

.moon-cake-body {
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #d4a574, #8b6239);
  border-radius: 20%;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 30px;
  border: 1px solid rgba(230, 230, 250, 0.3);
}

@keyframes bounce {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-30px);
  }
}

.rabbit {
  position: absolute;
  width: 50px;
  height: 60px;
  cursor: pointer;
  animation: hop 3.5s infinite ease-in-out;
  z-index: 30;
  transition: transform 0.3s;
}

.rabbit:hover {
  transform: scale(1.15);
  filter: brightness(1.2);
}

.rabbit-body {
  width: 30px;
  height: 40px;
  background: radial-gradient(ellipse at center, #e6e6fa, #b0c4de);
  border-radius: 50%;
  position: absolute;
  bottom: 0;
  left: 10px;
  box-shadow: 0 0 20px rgba(230, 230, 250, 0.5);
}

.rabbit-ear {
  width: 10px;
  height: 25px;
  background: #e6e6fa;
  border-radius: 50%;
  position: absolute;
  top: 0;
  box-shadow: 0 0 8px rgba(230, 230, 250, 0.3);
}

.rabbit-ear.left {
  left: 12px;
  transform: rotate(-10deg);
}
.rabbit-ear.right {
  right: 12px;
  transform: rotate(10deg);
}

.rabbit-ear::after {
  content: "";
  position: absolute;
  top: 20%;
  left: 50%;
  transform: translateX(-50%);
  width: 5px;
  height: 12px;
  background: #ffb6c1;
  border-radius: 50%;
}

.rabbit-eye {
  width: 4px;
  height: 4px;
  background: #333;
  border-radius: 50%;
  position: absolute;
  top: 25px;
}

.rabbit-eye.left {
  left: 18px;
}
.rabbit-eye.right {
  right: 18px;
}

.rabbit-nose {
  position: absolute;
  top: 32px;
  left: 50%;
  transform: translateX(-50%);
  width: 3px;
  height: 3px;
  background: #ff69b4;
  border-radius: 50%;
}

@keyframes hop {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-40px) scaleY(0.95);
  }
}

.special-effects {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 50;
}

.floating-lantern {
  position: absolute;
  width: 35px;
  height: 45px;
  animation: floatUp 10s linear;
  pointer-events: none;
}

.floating-lantern-body {
  width: 100%;
  height: 80%;
  background: radial-gradient(ellipse at center, #ff9500, #ff6b00);
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  box-shadow: 0 0 25px rgba(255, 149, 0, 0.7);
}

.floating-lantern-body::after {
  content: "🏮";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 14px;
}

@keyframes floatUp {
  from {
    transform: translateY(100vh);
    opacity: 0.7;
  }
  to {
    transform: translateY(-50px);
    opacity: 0;
  }
}

.change {
  position: absolute;
  top: 5%;
  left: 10%;
  width: 80px;
  height: 100px;
  z-index: 20;
  animation: float 12s infinite ease-in-out;
}

.change-body {
  width: 100%;
  height: 80%;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 120"><path d="M50 10 c-20 0-30 30-30 50 s10 40 30 40 s30-20 30-40 s-10-50-30-50 z" fill="%23e6e6fa" opacity="0.7"/><path d="M40 30 c-5 0-8 5-8 10 s3 10 8 10 c5 0 8-5 8-10 s-3-10-8-10 z" fill="%23b0c4de"/><path d="M60 30 c-5 0-8 5-8 10 s3 10 8 10 c5 0 8-5 8-10 s-3-10-8-10 z" fill="%23b0c4de"/><path d="M50 70 c-5 0-10 5-10 10 s5 5 10 5 s10-5 10-5 s-5-10-10-10 z" fill="%23ff69b4"/></svg>')
    no-repeat center / contain;
}

.cuoi {
  position: absolute;
  bottom: 10%;
  right: 10%;
  width: 60px;
  height: 80px;
  z-index: 20;
  animation: hop 4s infinite ease-in-out;
}

.cuoi-body {
  width: 100%;
  height: 100%;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 80"><path d="M30 20 c-15 0-25 20-25 40 s10 20 25 20 s25-10 25-20 s-10-40-25-40 z" fill="%23e6e6fa" opacity="0.7"/><circle cx="20" cy="30" r="5" fill="%23333"/><circle cx="40" cy="30" r="5" fill="%23333"/><path d="M30 50 c-5 0-8 3-8 6 s3 6 8 6 s8-3 8-6 s-3-6-8-6 z" fill="%23ff69b4"/></svg>')
    no-repeat center / contain;
}

/* Enhanced twinkling stars */
@keyframes twinkle {
  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }
  25% {
    opacity: 0.3;
    transform: scale(0.8);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.2);
  }
  75% {
    opacity: 0.5;
    transform: scale(0.9);
  }
}

@media (max-width: 768px) {
  .greeting h1 {
    font-size: 2.5em;
  }
  .greeting p {
    font-size: 1.3em;
  }
  .dedication h2 {
    font-size: 1.8em;
  }
  .dedication .recipient {
    font-size: 2em;
  }
  button {
    padding: 10px 20px;
    font-size: 1em;
  }
  body::after {
    width: 150px;
    height: 150px;
  }
  body::before {
    width: 120px;
    height: 120px;
  }
}

@media (max-width: 480px) {
  .greeting {
    padding: 20px;
  }
  .greeting h1 {
    font-size: 2em;
  }
  .greeting p {
    font-size: 1.1em;
  }
  .dedication .recipient {
    font-size: 1.6em;
  }
  button {
    padding: 8px 15px;
    font-size: 0.9em;
  }
  body::after {
    width: 120px;
    height: 120px;
  }
  body::before {
    width: 100px;
    height: 100px;
  }
}
